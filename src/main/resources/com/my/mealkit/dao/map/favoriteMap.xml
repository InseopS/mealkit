<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
	'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace='com.my.mealkit.dao.map.FavoriteMap'>
	<select id='selectFavorites' resultType='favorite'>
		SELECT mealkit.favorites.*, mealkit.mealkits.mealkit_name, mealkit.mealkits.mealkit_img_file_name, mealkit.mealkits.price 
		FROM mealkit.FAVORITES JOIN mealkit.MEALKITS
		ON mealkit.favorites.MEALKIT_NUM = mealkit.MEALKITS.MEALKIT_NUM
		JOIN mealkit.users 
		ON mealkit.favorites.user_id = mealkit.users.user_id
		WHERE mealkit.favorites.user_id = #{userId}
	</select>

	<select id='selectFavorite' resultType='favorite'>
		SELECT mealkit.FAVORITES.*, mealkit.MEALKITS.MEALKIT_NAME, mealkit.MEALKITS.MEALKIT_IMG_FILE_NAME, mealkit.MEALKITS.PRICE 
		FROM mealkit.FAVORITES JOIN mealkit.MEALKITS
		ON mealkit.favorites.MEALKIT_NUM = mealkit.MEALKITS.MEALKIT_NUM
		WHERE mealkit.favorites.USER_ID = #{userId}
	</select>

	<insert id='insertFavorite'>
		INSERT INTO FAVORITES(USER_ID, MEALKIT_NUM)
		values (#{userId}, #{mealkitNum})
	</insert>

	<delete id='deleteFavorite'>
		DELETE FAVORITES
		WHERE USER_ID = #{userId} AND MEALKIT_NUM = #{mealkitNum}
	</delete>
</mapper>