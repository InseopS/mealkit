<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
	'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace='com.my.mealkit.dao.map.CartMap'>
	<select id='selectCarts' resultType='cart'>
		SELECT CARTS.*, MEALKITS.MEALKIT_NAME, MEALKITS.MEALKIT_IMG_FILE_NAME, MEALKITS.PRICE 
		FROM CARTS JOIN MEALKITS
		ON CARTS.MEALKIT_NUM = MEALKITS.MEALKIT_NUM
		JOIN USERS
		ON CARTS.USER_ID = USERS.USER_ID
		WHERE USERS.USER_ID = #{userId}
	</select>

	<select id='selectCart' resultType='cart'>
		SELECT CARTS.*, MEALKITS.MEALKIT_NAME, MEALKITS.MEALKIT_IMG_FILE_NAME, MEALKITS.PRICE
		FROM CARTS JOIN MEALKITS
		ON CARTS.MEALKIT_NUM = MEALKITS.MEALKIT_NUM
		JOIN USERS
		ON CARTS.USER_ID = USERS.USER_ID
		WHERE USERS.USER_ID = #{userId}
	</select>

	<insert id='insertCart'>
		INSERT INTO CARTS(USER_ID, MEALKIT_NUM, MEALKIT_COUNT)
		values (#{userId}, #{mealkitNum}, #{mealkitCount})
	</insert>

	<delete id='deleteCart'>
		DELETE CARTS
		WHERE USER_ID = #{userId} AND MEALKIT_NUM = #{mealkitNum}
	</delete>
</mapper>