<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
	'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace='com.my.mealkit.dao.map.ReviewMap'>
	<select id='selectReviews' resultType='review'>
		select * from reviews
		order by review_num
	</select>
	
	<select id='detailReviews' resultType='review'>
		select * from reviews
		where review_num = #{reviewNum}
	</select>
	
	<select id='selectAdminReviews' resultType='review'>
		select * from reviews
		order by review_num
	</select>
	
	<select id='detailAdminReviews' resultType='review'>
		select * from reviews
		where review_num = #{reviewNum}
	</select>
	
	<insert id='insertReview'>
		insert into reviews(review_num, review_title, review_content, rate, 
			review_img_file_name, review_regdate, order_num)
		values(review_num_seq.nextval, #{reviewTitle}, #{reviewContent}, #{rate}
			#{reviewImgfileName}, sysdate, 1)
	</insert>
	
	<update id='updateReview'>
		update reviews
		set review_title = #{title}, 
			review_content = #{content},
			rate = #{rate},
			review_img_file_name = #{reviewImgfileName}
			review_regdate = #{reviewRegDate},
		where review_num = #{reviewNum}
	</update>
	
	<delete id='deleteReview'>
	   delete reviews
	   where review_num = #{reviewNum}
	</delete>
	
	<delete id='deleteAdminReview'>
		delete reviews
		where review_num = #{reviewNum}
	</delete>
	
	<resultMap id='reviewMap' type='review'>
		<id property='reviewNum' column='review_num'/>
		<result property='reviewTitle' column='review_title'/>
		<result property='reviewContent' column='review_content'/>
		<result property='rate' column='rate'/>
		<result property='reviewImgFileName' column='review_img_file_name'/>
		<result property='reviewRegDate' column='review_regdate'/>
		<result property='orderNum' column='order_num'/>
	</resultMap>
</mapper> 