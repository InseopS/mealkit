<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
	'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace='com.my.mealkit.dao.map.RefundMap'>
	<select id='selectRefunds' resultType='refund'>
		select refunds.*, orders.order_num, 
			refund_status.refund_status_name,
			refund_reason.refund_reason_name
		from refunds inner join orders
		on refunds.order_num = orders.order_num
		inner join refund_status
		on refund_status.refund_status_code = refunds.refund_status_code
		inner join refund_reason
		on refund_reason.refund_reason_code = refunds.refund_reason_code
		where refunds.order_num = #{orderNum}
		order by order_num
	</select>
	
	<select id='selectAdminRefunds' resultType='refund'>
		select * from refunds
		order by refund_num
	</select>
	
	<insert id='insertRefund'>
		insert into refunds(refund_num, refund_img_file_name, refund_content,
			refund_reason_code, refund_status_code, order_num)
		values(refund_num_seq.nextval, #{refundImgFileName}, #{refundContent},
			#{refundReasonCode}, #{refundStatusCode}, #{orderNum})
	</insert>
	
	<delete id='deleteRefund'>
		delete refunds
		where refund_num = #{refundNum}
	</delete>
</mapper>